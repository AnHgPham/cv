# Court Detection Configuration
# ==============================

# Court Dimensions (meters) - Standard Tennis Court
tennis_court:
  length: 23.77
  width: 10.97
  singles_width: 8.23
  service_line_distance: 6.40
  net_distance: 11.885  # half of length
  # 14 keypoints (x, y) in court coordinates
  keypoints:
    - [0.0, 0.0]           # Top-left corner
    - [0.0, 5.485]         # Top-left singles
    - [0.0, 10.97]         # Top-right corner
    - [6.40, 0.0]          # Left service line top
    - [6.40, 5.485]        # Left service T
    - [6.40, 10.97]        # Right service line top
    - [11.885, 0.0]        # Net left
    - [11.885, 5.485]      # Net center
    - [11.885, 10.97]      # Net right
    - [17.385, 0.0]        # Right service line bottom
    - [17.385, 5.485]      # Right service T
    - [17.385, 10.97]      # Right service line bottom-right
    - [23.77, 0.0]         # Bottom-left corner
    - [23.77, 10.97]       # Bottom-right corner

# Court Dimensions (feet) - Standard Pickleball Court
pickleball_court:
  length: 13.41  # 44 feet in meters
  width: 6.10    # 20 feet in meters
  non_volley_zone: 2.13  # 7 feet (kitchen)
  net_distance: 6.705

# Classical Detection Parameters
classical:
  # Color thresholding (for white lines)
  white_lower_hsv: [0, 0, 180]
  white_upper_hsv: [180, 50, 255]
  
  # Morphological operations
  morph_kernel_size: 5
  dilate_iterations: 2
  erode_iterations: 1
  
  # Canny edge detection
  canny_low: 50
  canny_high: 150
  
  # Hough Transform
  hough_rho: 1
  hough_theta: 0.01745  # pi/180
  hough_threshold: 100
  hough_min_line_length: 50
  hough_max_line_gap: 30
  
  # Line filtering
  horizontal_angle_thresh: 30  # degrees from horizontal
  vertical_angle_thresh: 30    # degrees from vertical
  
  # RANSAC
  ransac_reproj_threshold: 5.0
  
  # Court surface color (HSV range for blue/cyan courts)
  surface_lower_hsv: [85, 40, 80]
  surface_upper_hsv: [130, 255, 255]
  
  # ROI: fraction of frame height to ignore from top (0.0 = no crop).
  # Set to 0.25-0.35 for indoor scenes with scoreboards/banners.
  roi_top_crop: 0.0
  
  # Manual court corners [TL, TR, BL, BR] in pixel coordinates.
  # These are VIDEO-SPECIFIC (not universal). Each new video needs
  # its own corners or auto-detection must work.
  
  # --- Tennis: "Video Project 4.mp4" outdoor static camera ---
  manual_corners:
    - [835, 265]     # TL: far-left baseline
    - [1185, 265]    # TR: far-right baseline
    - [470, 880]     # BL: near-left baseline
    - [1635, 895]    # BR: near-right baseline
  
  # --- Pickleball: BUBADU OPEN indoor camera (video-specific) ---
  # manual_corners:
  #   - [555, 178]     # TL: far-left baseline
  #   - [790, 177]     # TR: far-right baseline
  #   - [315, 585]     # BL: near-left baseline
  #   - [1090, 595]    # BR: near-right baseline

# Deep Learning Court Detection
deep_learning:
  model: resnet18           # backbone for keypoint detection
  num_keypoints: 14
  input_size: [640, 360]
  weights: models/court_detector/court_keypoint_best.pt
  confidence_threshold: 0.5
